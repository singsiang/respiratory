<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘¼å¸é“è—¥ç‰©è¡›æ•™èˆ‡æ“ä½œæŒ‡å—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f4f7f9;
        }

        .category-pill.active {
            background-color: #0369a1;
            color: white;
            box-shadow: 0 4px 12px rgba(3, 105, 161, 0.3);
        }

        .med-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .med-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 15px 30px -10px rgba(0, 0, 0, 0.12);
        }

        .video-btn {
            background: linear-gradient(135deg, #ef4444 0%, #b91c1c 100%);
        }
        
        .qr-overlay {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(8px);
        }

        /* åˆ†é¡å´é‚Šé¡è‰²æ¨™ç¤º */
        .border-nasal { border-left: 6px solid #fb923c; }
        .border-smi { border-left: 6px solid #38bdf8; }
        .border-dpi { border-left: 6px solid #4ade80; }
        .border-mdi { border-left: 6px solid #818cf8; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- é é¦–æ¨™é¡Œ -->
        <header class="mb-10 text-center">
            <h1 class="text-3xl md:text-4xl font-black text-slate-800 mb-3 tracking-tight">å‘¼å¸é“è—¥ç‰©å¿«é€Ÿæª¢ç´¢æŒ‡å—</h1>
            <p class="text-slate-500 max-w-2xl mx-auto text-lg">å¿«é€ŸæŸ¥æ‰¾é¼»å™´åŠ‘åŠå¸å…¥å™¨æ“ä½œæ•™å­¸ï¼Œæ”¯æ´å½±ç‰‡æ’­æ”¾èˆ‡æ‰‹æ©Ÿ QR Code æƒæã€‚</p>
        </header>

        <!-- æœå°‹èˆ‡ç¯©é¸å€åŸŸ -->
        <div class="sticky top-4 z-20 bg-white/80 backdrop-blur-md rounded-3xl p-5 shadow-lg mb-10 border border-white">
            <div class="flex flex-col md:flex-row gap-4 mb-5">
                <div class="relative flex-grow">
                    <span class="absolute inset-y-0 left-0 pl-4 flex items-center text-slate-400">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </span>
                    <input type="text" id="searchInput" placeholder="æœå°‹è‹±æ–‡å•†å“åã€ä¸­æ–‡åæˆ–æˆåˆ† (å¦‚: Ventolin, è‰¾æ•é‡‹...)" 
                           class="w-full pl-12 pr-4 py-4 bg-slate-50 border-none rounded-2xl focus:ring-2 focus:ring-sky-500 outline-none text-lg transition">
                </div>
            </div>

            <div class="flex flex-wrap gap-2 justify-center" id="categoryFilters">
                <button class="category-pill active px-6 py-2 rounded-xl text-sm font-bold transition" data-category="all">å…¨éƒ¨è—¥ç‰©</button>
                <button class="category-pill px-6 py-2 rounded-xl text-sm font-bold bg-white text-slate-600 border border-slate-100 hover:bg-slate-50 transition shadow-sm" data-category="nasal">é¼»å™´åŠ‘</button>
                <button class="category-pill px-6 py-2 rounded-xl text-sm font-bold bg-white text-slate-600 border border-slate-100 hover:bg-slate-50 transition shadow-sm" data-category="smi">SMI (è»Ÿéœ§ Respimat)</button>
                <button class="category-pill px-6 py-2 rounded-xl text-sm font-bold bg-white text-slate-600 border border-slate-100 hover:bg-slate-50 transition shadow-sm" data-category="dpi">DPI (ä¹¾ç²‰å¸å…¥)</button>
                <button class="category-pill px-6 py-2 rounded-xl text-sm font-bold bg-white text-slate-600 border border-slate-100 hover:bg-slate-50 transition shadow-sm" data-category="mdi">MDI (å®šé‡å™´éœ§)</button>
            </div>
        </div>

        <!-- è—¥ç‰©åˆ—è¡¨ç¶²æ ¼ -->
        <div id="medicineGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- å…§å®¹ç”± JavaScript å‹•æ…‹æ’å…¥ -->
        </div>

        <!-- ç„¡æœå°‹çµæœ -->
        <div id="noResults" class="hidden text-center py-20">
            <div class="text-6xl mb-4">ğŸ”</div>
            <p class="text-xl text-slate-400 font-medium">æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„è—¥ç‰©ï¼Œè«‹å˜—è©¦å…¶ä»–é—œéµå­—</p>
        </div>
    </div>

    <!-- å½±ç‰‡æ’­æ”¾å½ˆçª— -->
    <div id="videoModal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4 bg-slate-900/90">
        <div class="bg-black rounded-3xl overflow-hidden w-full max-w-4xl relative shadow-2xl">
            <button onclick="closeVideo()" class="absolute top-4 right-4 text-white hover:text-red-400 z-10 bg-black/40 backdrop-blur rounded-full p-2 transition">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div class="aspect-video w-full flex items-center justify-center">
                <video id="modalPlayer" controls class="w-full h-full">
                    æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´æ’­æ”¾æ­¤å½±ç‰‡ã€‚
                </video>
            </div>
        </div>
    </div>

    <script>
        // è—¥ç‰©è³‡æ–™åº«
        const medicines = [
            // é¼»å™´åŠ‘ (Nasal Sprays)
            { type: 'nasal', name: 'Tisonin', cn: 'ç‰¹ç´¢å¯§ (Trisonia)', ing: 'Triamcinolone', video: 'https://webapp.cgmh.org.tw/stor/picture/PVA001E20241213165924.mp4' },
            { type: 'nasal', name: 'Avamys', cn: 'è‰¾æ•é‡‹', ing: 'Fluticasone furoate', video: 'https://webapp.cgmh.org.tw/stor/picture/PVA052E20241213175133.mp4' },
            { type: 'nasal', name: 'Nasonex', cn: 'å…§èˆ’æ‹¿', ing: 'Mometasone furoate', video: 'https://webapp.cgmh.org.tw/stor/picture/PVA100E20241213180811.mp4' },
            { type: 'nasal', name: 'Dufanas', cn: 'å¸ä¼å¯§', ing: 'Azelastine/Fluticasone', video: 'https://webapp.cgmh.org.tw/stor/picture/PVA114E20241213173056.mp4' },
            { type: 'nasal', name: 'Azetin', cn: 'å™´ç«‹åœ', ing: 'Azelastine', video: 'https://webapp.cgmh.org.tw/stor/picture/PVA106E20241213171944.mp4' },
            { type: 'nasal', name: 'Allergocom', cn: 'è‰¾éº—', ing: 'Cromolyn', video: 'https://webapp.cgmh.org.tw/stor/picture/PZA014E20241213173753.mp4' },
            { type: 'nasal', name: 'Sindecon', cn: 'é†«é¼»æ˜“', ing: 'Oxymetazoline', video: 'https://webapp.cgmh.org.tw/stor/picture/PVG010E20241213174519.mp4' },
            { type: 'nasal', name: 'Butaxo', cn: 'å…¨å®‰ (Butanol)', ing: 'Butorphanol', video: 'https://webapp.cgmh.org.tw/stor/picture/017.mp4' },

            // SMI (Respimat)
            { type: 'smi', name: 'Striverdi', cn: 'æ–¯åŠ›ç‘', ing: 'Olodaterol', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB057E20230817171041.mp4' },
            { type: 'smi', name: 'Spiriva', cn: 'é©å–˜æ¨‚', ing: 'Tiotropium', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB057E20230817171041.mp4' },
            { type: 'smi', name: 'Spiolto', cn: 'é©å€æ¨‚', ing: 'Tiotropium/Olodaterol', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB057E20230817171041.mp4' },

            // DPI (Dry Powder Inhalers)
            { type: 'dpi', name: 'Onbrez', cn: 'æ˜‚èˆ’ (Breezhaler)', ing: 'Indacaterol', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB052E20230817165536.mp4' },
            { type: 'dpi', name: 'Seebri', cn: 'å–œå¿…æ¨‚ (Breezhaler)', ing: 'Glycopyrronium', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB052E20230817165536.mp4' },
            { type: 'dpi', name: 'Ultibro', cn: 'æ˜‚å¿…æ¨‚ (Breezhaler)', ing: 'Indacaterol/Glyco', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB052E20230817165536.mp4' },
            { type: 'dpi', name: 'Enerzair', cn: 'è‚ºèˆ’å¦ (Breezhaler)', ing: 'Inda/Glyco/Mome', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB066E20250919154133.mp4' },
            { type: 'dpi', name: 'Anoro', cn: 'å®‰é€šæ¨‚ (Ellipta)', ing: 'Umeclidinium/Vilanterol', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB056E20250116120821.mp4' },
            { type: 'dpi', name: 'Relvar', cn: 'ç‘å…‹æ²™ (Ellipta)', ing: 'Fluticasone/Vilanterol', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB056E20250116120821.mp4' },
            { type: 'dpi', name: 'Trelegy', cn: 'å–˜ç«‹æ°£ (Ellipta)', ing: 'Flu/Ume/Vil', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB056E20250116120821.mp4' },
            { type: 'dpi', name: 'Seretide Accuhaler', cn: 'ä½¿è‚ºæ³°æº–ç´ (ç´«)', ing: 'Salmeterol/Fluticasone', video: 'https://webapp.cgmh.org.tw/stor/picture/PMA009E20230914192800.mp4' },
            { type: 'dpi', name: 'Symbicort Turbuhaler', cn: 'ä¿¡å¿…å¯éƒ½ä¿', ing: 'Budesonide/Formoterol', video: 'https://webapp.cgmh.org.tw/stor/picture/PMA005E20230817090020.mp4' },

            // MDI (Metered Dose Inhalers)
            { type: 'mdi', name: 'Bevespi', cn: 'æ¯”å€æ€', ing: 'Glycopyrronium/Formoterol', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB065E20231023173208.mp4' },
            { type: 'mdi', name: 'Ventolin', cn: 'è¬æ‰˜æ— (å™´éœ§)', ing: 'Salbutamol', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB054E20231023172513.mp4' },
            { type: 'mdi', name: 'Berotec', cn: 'å‚™å‹å–˜ (å™´éœ§)', ing: 'Fenoterol', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB015E20231023172308.mp4' },
            { type: 'mdi', name: 'Symbicort Rapihaler', cn: 'ä¿¡å¿…å¯å®šé‡', ing: 'Budesonide/Formoterol', video: 'https://webapp.cgmh.org.tw/stor/picture/PMA058E20230914191940.mp4' },
            { type: 'mdi', name: 'Seretide Evohaler', cn: 'ä½¿è‚ºæ³°å®šé‡', ing: 'Salmeterol/Fluticasone', video: 'https://webapp.cgmh.org.tw/stor/picture/PMA013E20250917153840.mp4' },
            { type: 'mdi', name: 'Foster', cn: 'è¤‡æ–¹å®šé‡ (è‚ºèˆ’å¦)', ing: 'BDP/Formoterol', video: 'https://webapp.cgmh.org.tw/stor/picture/PMA034E20240119095130.mp4' },
            { type: 'mdi', name: 'Trimbow', cn: 'å…¨ç›ˆä¸‰åˆä¸€', ing: 'BDP/Formo/Glyco', video: 'https://webapp.cgmh.org.tw/stor/picture/PQB063E20231023172741.mp4' },
            { type: 'mdi', name: 'Alvesco', cn: 'å®‰è‚ºæ¨‚', ing: 'Ciclesonide', video: 'https://webapp.cgmh.org.tw/stor/picture/PMA054E20240119095228.mp4' },
            { type: 'mdi', name: 'Duasma', cn: 'å¤šé©ç¢¼', ing: 'Budesonide', video: 'https://webapp.cgmh.org.tw/stor/picture/PMA007E20231122133102.mp4' }
        ];

        let currentCategory = 'all';
        let searchQuery = '';

        // æ¸²æŸ“è—¥ç‰©å¡ç‰‡
        function renderMedicines() {
            const grid = document.getElementById('medicineGrid');
            const noResults = document.getElementById('noResults');
            
            const filtered = medicines.filter(m => {
                const matchesCategory = currentCategory === 'all' || m.type === currentCategory;
                const matchesSearch = m.name.toLowerCase().includes(searchQuery.toLowerCase()) || 
                                     m.cn.includes(searchQuery) ||
                                     m.ing.toLowerCase().includes(searchQuery.toLowerCase());
                return matchesCategory && matchesSearch;
            });

            if (filtered.length === 0) {
                grid.innerHTML = '';
                noResults.classList.remove('hidden');
                return;
            }

            noResults.classList.add('hidden');
            grid.innerHTML = filtered.map(m => `
                <div class="med-card relative bg-white rounded-3xl overflow-hidden border border-slate-100 shadow-sm flex flex-col h-full border-nasal ${getBorderClass(m.type)}">
                    <div class="p-6 flex-grow flex flex-col">
                        <div class="flex justify-between items-start mb-4">
                            <span class="px-3 py-1 bg-slate-100 rounded-full text-[10px] font-bold text-slate-500 uppercase tracking-widest">${getDeviceLabel(m.type)}</span>
                        </div>
                        
                        <div class="mb-5">
                            <h3 class="text-2xl font-black text-slate-800 mb-1 tracking-tight">${m.name}</h3>
                            <p class="text-sky-600 font-bold text-lg">${m.cn}</p>
                        </div>
                        
                        <div class="mb-6">
                            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">ä¸»è¦æˆåˆ†</p>
                            <p class="text-sm text-slate-600 font-medium leading-relaxed">${m.ing}</p>
                        </div>

                        <div class="mt-auto pt-5 border-t border-slate-50 grid grid-cols-2 gap-3">
                            <button onclick="openVideo('${m.video}')" class="video-btn text-white px-3 py-3 rounded-2xl text-xs font-bold flex items-center justify-center gap-2 hover:brightness-110 shadow-md transition transform active:scale-95">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"></path></svg>
                                æ•™å­¸å½±ç‰‡
                            </button>
                            <button onclick="toggleQR(this, '${m.video}')" class="bg-slate-800 text-white px-3 py-3 rounded-2xl text-xs font-bold flex items-center justify-center gap-2 hover:bg-black shadow-md transition transform active:scale-95">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path></svg>
                                æ‰‹æ©Ÿæƒç¢¼
                            </button>
                        </div>
                    </div>

                    <!-- QR Code è¦†è“‹å±¤ -->
                    <div class="qr-overlay absolute inset-0 hidden flex flex-col items-center justify-center p-8 text-center animate-in fade-in zoom-in duration-300 z-10">
                        <div class="w-full flex justify-end mb-4">
                            <button onclick="hideQR(this)" class="p-2 bg-slate-100 rounded-full text-slate-500 hover:text-black">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                            </button>
                        </div>
                        <p class="text-lg font-black text-slate-900 mb-6">æ‰‹æ©Ÿæƒæè§€çœ‹<br>æ“ä½œæ•™å­¸å½±ç‰‡</p>
                        <div class="bg-white p-4 rounded-3xl shadow-xl mb-8 border border-slate-50">
                            <img class="w-40 h-40" src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(m.video)}" alt="QR Code">
                        </div>
                        <p class="text-[10px] text-slate-400 font-medium">å½±ç‰‡ä¾†æºï¼šé•·åºšé†«ç™‚ç³»çµ±</p>
                    </div>
                </div>
            `).join('');
        }

        // è¼”åŠ©å‡½å¼ï¼šå–å¾—åˆ†é¡æ¨£å¼
        function getBorderClass(type) {
            switch(type) {
                case 'nasal': return 'border-nasal';
                case 'smi': return 'border-smi';
                case 'dpi': return 'border-dpi';
                case 'mdi': return 'border-mdi';
                default: return '';
            }
        }

        // è¼”åŠ©å‡½å¼ï¼šå–å¾—è£ç½®ä¸­æ–‡æ¨™ç±¤
        function getDeviceLabel(type) {
            switch(type) {
                case 'nasal': return 'é¼»å™´åŠ‘';
                case 'smi': return 'Respimat';
                case 'dpi': return 'ä¹¾ç²‰å¸å…¥å™¨';
                case 'mdi': return 'å®šé‡å™´éœ§å™¨';
                default: return type;
            }
        }

        // å½±ç‰‡æ§åˆ¶
        function openVideo(url) {
            const modal = document.getElementById('videoModal');
            const player = document.getElementById('modalPlayer');
            player.src = url;
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            player.play();
        }

        function closeVideo() {
            const modal = document.getElementById('videoModal');
            const player = document.getElementById('modalPlayer');
            player.pause();
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // QR Code æ§åˆ¶
        function toggleQR(btn, url) {
            const card = btn.closest('.med-card');
            const overlay = card.querySelector('.qr-overlay');
            overlay.classList.remove('hidden');
        }

        function hideQR(btn) {
            const overlay = btn.closest('.qr-overlay');
            overlay.classList.add('hidden');
        }

        // æœå°‹èˆ‡ç¯©é¸é‚è¼¯
        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            renderMedicines();
        });

        document.getElementById('categoryFilters').addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                document.querySelectorAll('.category-pill').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');
                currentCategory = e.target.dataset.category;
                renderMedicines();
            }
        });

        // é»æ“Šå½ˆçª—å¤–éƒ¨é—œé–‰å½±ç‰‡
        document.getElementById('videoModal').addEventListener('click', (e) => {
            if (e.target.id === 'videoModal') closeVideo();
        });

        // åˆå§‹è¼‰å…¥
        window.onload = renderMedicines;
    </script>
</body>
</html>

